/*! gatekeeper - v0.0.3 - 2013-08-02
* Copyright (c) 2013 HIRAKI Satoru; Licensed Apache License, Version 2.0 */
var __hasProp={}.hasOwnProperty;(function(){var n,t,r,e,i,o,u,f,l,c;return f=0,u=0,o={},e={},l=function(n,t,r){var e;return e=function(n){var t;if(t=void 0)return t;if(null==t&&(t=n.matches),null==t&&(t=n.webkitMatchesSelector),void 0===t)throw Error("There is no mache element");return t},"_root"===t?r:n!==r?e(n).call(n,t)?n:n.parentNode?(f++,l(n.parentNode,t,r)):void 0:void 0},t=function(n,t,r,e){var i,u,f,l,c,a;return null==(l=o[f=n.id])&&(o[f]={}),null==(c=(i=o[n.id])[t])&&(i[t]={}),null==(a=(u=o[n.id][t])[r])&&(u[r]=[]),o[n.id][t][r].push(e)},c=function(n,t,r,e){var i,u,f,l,c,a;if(o[n.id]){if(!event){c=o[n.id];for(l in c)__hasProp.call(c,l)&&(o[n.id][l]={})}if(!e&&!r)return o[n.id][t]={},void 0;if(!e)return delete o[n.id][t][r],void 0;if(o[n.id][event][r]){for(u=0,f=o[n.id][t][r],i=f.length,a=[];i>u;){if(f[u]===e){f.splice(u,1);break}a.push(u++)}return a}}},i=function(n,t,r){var i,u,c,a,d,h,s,v,p,m,b;if(b=o[n][r])for(m=t.target,v=void 0,a=void 0,s={},u=0,c=0,f=0,i=function(n){return n.preventDefault(),n.stopPropagation()},p=Object.keys(b),p.forEach(function(i){var u,c;return c=o[n][r][i],a=l(m,i,e[n].element),u=function(){return!0},a&&u(r,e[n].element,a,"_root"===i,t)?(f++,c.match=a,s[f]=c):void 0}),t.stopPropagation=function(){return t.cancelBubble=!0},u=0;f>=u;){if(s[u])for(c=0,d=s[u].length;d>c;){if(h=s[u][c],null!=h&&h.call(s[u].match,t)===!1)return i(t),void 0;if(t.cancelBubble)return;c++}u++}},r=function(n,r,e,u){var f,l,a,d,h,s;if(this.element){for(l=function(n,t){var r;return r=Object.prototype.toString.call(t).slice(8,-1),null!=t&&r===n?!0:!1},f=function(n,t,r){var e;return e="blur"===t||"focus"===t,n.element.addEventListener(t,r,e)},l("Array",n)||(n=[n]),!e&&l("Function",r)&&(e=r,r="_root"),h=this.id,d=0,a=n.length,s=function(n){return function(t){return i(h,t,n)}};a>d;)u&&c(this,n[d],r,e),o[h]&&o[h][n[d]]||f(this,n[d],s(n[d])),t(this,n[d],r,e),d++;return this}},n=function(){function n(t,r){var i;if(!(this instanceof n)){for(i in e)if(e[i].element===t)return e[i];return u++,e[u]=new n(t,u),e[u]}this.element=t,this.id=r}return n.prototype.on=function(n,t,e){return r.call(this,n,t,e)},n.prototype.off=function(n,t,e){return r.call(this,n,t,e,!0)},n}(),window.Gk=n})();